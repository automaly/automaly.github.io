<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-development/framework/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Reservation and on-hand inventory in warehouse management | Automaly | Dynamics 365 Finance Operations notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://automaly.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://automaly.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://automaly.github.io/docs/development/framework/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Reservation and on-hand inventory in warehouse management | Automaly | Dynamics 365 Finance Operations notes"><meta data-rh="true" name="description" content="1. Inventory reservation hierarchy in Warehouse management"><meta data-rh="true" property="og:description" content="1. Inventory reservation hierarchy in Warehouse management"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://automaly.github.io/docs/development/framework/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management"><link data-rh="true" rel="alternate" href="https://automaly.github.io/docs/development/framework/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management" hreflang="en"><link data-rh="true" rel="alternate" href="https://automaly.github.io/docs/development/framework/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://GQN6ITS7PP-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Automaly | Dynamics 365 Finance Operations notes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Automaly | Dynamics 365 Finance Operations notes Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","367316606","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=	GTM-NDZH42N8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","\tGTM-NDZH42N8",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Automaly | Dynamics 365 Finance Operations notes" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.95e1e37e.css">
<script src="/assets/js/runtime~main.9c427d56.js" defer="defer"></script>
<script src="/assets/js/main.99216438.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo2.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo2.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Automaly</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Notes</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/ms-learning/lab">MS Labs</a><a href="https://automaly.com/finopsnews/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">FinOps blogs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://dynamics365.github.io/erd/default.htm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">AX 2012 ERD<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/Dynamics365/One-stop-Dynamics-365-Finance-Operations" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://automaly.com/rss.xml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">RSS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo2.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo2.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Automaly</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">onestop-finops</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/integration">Integration</a><button aria-label="Collapse sidebar category &#x27;Integration&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/integration/D365-and-Dataverse-Integration-Overview">Integration Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/integration/odata">OData - Data Entity</a><button aria-label="Expand sidebar category &#x27;OData - Data Entity&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/integration/business-event">Business event Overview</a><button aria-label="Expand sidebar category &#x27;Business event Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/integration/aif-integration-ax12">AIF Integration (AX 20212 - Deprecated)</a><button aria-label="Expand sidebar category &#x27;AIF Integration (AX 20212 - Deprecated)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/integration/dualwrite">index</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/integration/overview-bk">Head Metadata</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/development">Development</a><button aria-label="Collapse sidebar category &#x27;Development&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/x">X++</a><button aria-label="Expand sidebar category &#x27;X++&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/business-documents">Business documents</a><button aria-label="Expand sidebar category &#x27;Business documents&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/aot">AOT</a><button aria-label="Expand sidebar category &#x27;AOT&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/framework">Framework</a><button aria-label="Collapse sidebar category &#x27;Framework&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/development/framework/2022-11-09-reservation-and-on-hand-inventory-in-warehouse-management">Reservation and on-hand inventory in warehouse management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/development/framework/2022-11-13-extend-on-hand-entities-fin-ops">Extend on-hand inventory entities FinOps </a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/power-platform-integration">Power Platform Integration</a><button aria-label="Expand sidebar category &#x27;Power Platform Integration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/non-development">Non development</a><button aria-label="Expand sidebar category &#x27;Non development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/dynamics-365-certificate">Dynamics 365 Certificate</a><button aria-label="Expand sidebar category &#x27;Dynamics 365 Certificate&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/dynamics-ax-2012-archive">Dynamics AX 2012 Archive</a><button aria-label="Expand sidebar category &#x27;Dynamics AX 2012 Archive&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/development"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/framework"><span itemprop="name">Framework</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Reservation and on-hand inventory in warehouse management</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Reservation and on-hand inventory in warehouse management</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-inventory-reservation-hierarchy-in-warehouse-management">1. <strong>Inventory reservation hierarchy in Warehouse management</strong><a href="#1-inventory-reservation-hierarchy-in-warehouse-management" class="hash-link" aria-label="Direct link to 1-inventory-reservation-hierarchy-in-warehouse-management" title="Direct link to 1-inventory-reservation-hierarchy-in-warehouse-management">​</a></h2>
<p>The reservation functionality can be used only for items that are enabled for warehouse management processes. However, if an item is itself enabled for <a href="https://learn.microsoft.com/en-us/dynamics365/supply-chain/warehousing/flexible-warehouse-level-dimension-reservation" target="_blank" rel="noopener noreferrer">warehouse management processes</a>, it can be used both in warehouses that are enabled for warehouse management processes and warehouses that are not. The behavior in reservation scenarios is different, depending on the warehouse setup.</p>
<p>The functionality is built on reservation hierarchies and is intended to support the following:</p>
<ul>
<li>Flexible warehouse operations.</li>
<li>Postponement of reservation details.</li>
<li>Clear separation of which inventory dimensions can be specified, and when they can be specified.</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11-reservation-hierarchies">1.1 <strong>Reservation hierarchies</strong><a href="#11-reservation-hierarchies" class="hash-link" aria-label="Direct link to 11-reservation-hierarchies" title="Direct link to 11-reservation-hierarchies">​</a></h3>
<p>A typical reservation hierarchy for an item that uses the <code>Site</code>, <code>Warehouse</code>, <code>Inventory status</code>, <code>Location</code>, and <code>License plate</code> dimensions as physical inventory dimensions.</p>
<p><img decoding="async" loading="lazy" alt="Image" src="/assets/images/Reservation-hierarchies-e7ae36f77e532a9331c97b2f9d6c8e40.png" title="Reservation-hierarchies" width="903" height="633" class="img_ev3q"></p>
<p>The level with the lowest value in the Reservation hierarchy level column is the least-specific level, in the example above this is the site level.
The higher the value, the more details are required to make a reservation on that level.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="12-reservation-hierarchies-implementation">1.2 <strong>Reservation hierarchies implementation</strong><a href="#12-reservation-hierarchies-implementation" class="hash-link" aria-label="Direct link to 12-reservation-hierarchies-implementation" title="Direct link to 12-reservation-hierarchies-implementation">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Image" src="/assets/images/Reservation-hierarchies-implementation-af68daca15a56eaeda777da3144e0a85.png" title="Reservation-hierarchies-implementation" width="1577" height="587" class="img_ev3q"></p>
<p>The definitions of reservation hierarchies are stored in the <strong>WHSReservationHierarchy</strong> and <strong>WHSReservationHierarchyElement</strong> tables. These are shared tables. A reservation hierarchy can be associated with one item within a company which presents by <strong>WHSReservationHierarchyItem</strong>.
The <strong>WHSReservationHierarchyProvider</strong> class provides a large number of APIs that are useful when you work with and query the reservation hierarchy for an item.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13-making-reservations-on-different-levels">1.3 Making reservations on different levels<a href="#13-making-reservations-on-different-levels" class="hash-link" aria-label="Direct link to 1.3 Making reservations on different levels" title="Direct link to 1.3 Making reservations on different levels">​</a></h3>
<p>Based on the reservation hierarchy, you can make reservations on different levels without providing details about where to reserve and what dimensions to reserve on. This lets you postpone specific details, such as the location or license plate to make the reservation. The location to reserve items on can be determined later by the <a href="https://learn.microsoft.com/en-us/dynamics365/supply-chain/warehousing/warehouse-configuration" target="_blank" rel="noopener noreferrer"><strong>location directive</strong></a>.</p>
<p>As another example, you make reservations for a sales order created on <strong>site</strong> <code>Site1</code> and <strong>warehouse</strong> <code>WHS42</code>, which is a warehouse that is enabled for WHS processes, and for the Available inventory status. For this example, the reservation is made only
on the inventory status level.</p>
<p><img decoding="async" loading="lazy" alt="Image" src="/assets/images/reservations-on-different-levels-7283abd688e58e4827963f0e338fa180.png" title="reservations-on-different-levels" width="2421" height="489" class="img_ev3q"></p>
<p>Location <code>Main006</code> will be specified when processing the work</p>
<p><img decoding="async" loading="lazy" alt="Image" src="/assets/images/location-2392876dffc68242f3f78a6f6a9f32b3.png" title="location" width="2736" height="414" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-impact-of-the-reservation-hierarchy-setup">2. Impact of the reservation hierarchy setup<a href="#2-impact-of-the-reservation-hierarchy-setup" class="hash-link" aria-label="Direct link to 2. Impact of the reservation hierarchy setup" title="Direct link to 2. Impact of the reservation hierarchy setup">​</a></h2>
<p>For warehouses that are enabled for warehouse management processes, the setup of reservation hierarchies greatly affects the processes for <a href="https://learn.microsoft.com/en-us/dynamics365/supply-chain/warehousing/release-to-warehouse-process" target="_blank" rel="noopener noreferrer">outbound orders</a>, such as sales orders and transfer orders.</p>
<p>When you set up a reservation hierarchy, the key is to determine which dimensions should be positioned above the location level in the hierarchy, and which should be below. The following table describes the effects of arranging dimensions either above or below the location level.</p>
<table><thead><tr><th>Dimension placement</th><th>Description</th></tr></thead><tbody><tr><td>Dimension above location</td><td>The inventory dimension above the location level must be determined before the</td></tr><tr><td></td><td>Warehouse management functionality can be used. Therefore, this typically happens</td></tr><tr><td></td><td>during order processing or by letting the reservation system determine the dimensions.</td></tr><tr><td>Batch above location</td><td>Process industry functionality for batches requires that the Batch number dimension be</td></tr><tr><td></td><td>above the Location dimension in the reservation hierarchy. When this is the case, all</td></tr><tr><td></td><td>functionality for First Expiry First Out (FEFO), same batch, batch disposition codes, and</td></tr><tr><td></td><td>batch attributes is supported.</td></tr><tr><td>Dimensions below location</td><td>WHS and warehouse workers can determine the Location dimension and the</td></tr><tr><td></td><td>dimensions below it.</td></tr><tr><td></td><td></td></tr><tr><td></td><td>The Location dimension and any dimensions below it should not be entered into the sales</td></tr><tr><td></td><td>and transfer lines if you expect work to be created. For example, if the Batch number</td></tr><tr><td></td><td>dimension is below the Location dimension, it should not be specified on the sales line.</td></tr><tr><td></td><td>Otherwise, WHS cannot create work to carry out the pick and pack operations.</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-on-hand-representation-and-calculations">3. On-hand representation and calculations<a href="#3-on-hand-representation-and-calculations" class="hash-link" aria-label="Direct link to 3. On-hand representation and calculations" title="Direct link to 3. On-hand representation and calculations">​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31-on-hand-for-items-that-are-using-warehouse-management-processes">3.1 On-hand for items that are using warehouse management processes<a href="#31-on-hand-for-items-that-are-using-warehouse-management-processes" class="hash-link" aria-label="Direct link to 3.1 On-hand for items that are using warehouse management processes" title="Direct link to 3.1 On-hand for items that are using warehouse management processes">​</a></h3>
<p>The following table shows how the data might look for an item with 10 pieces available physical and 2 pieces reserved physical on the status level.</p>
<table><thead><tr><th>Level</th><th>Site</th><th>Warehouse</th><th>Inventory status</th><th>Location</th><th>License plate</th><th>Available physical</th><th>Available ordered</th><th>Reserved physical</th><th>Reserved ordered</th></tr></thead><tbody><tr><td>Item</td><td></td><td></td><td></td><td></td><td></td><td>10</td><td>10</td><td>2</td><td>0</td></tr><tr><td>Site</td><td>S1</td><td></td><td></td><td></td><td></td><td>10</td><td>10</td><td>2</td><td>0</td></tr><tr><td>Warehouse</td><td>S1</td><td>WH1</td><td></td><td></td><td></td><td>10</td><td>10</td><td>2</td><td>0</td></tr><tr><td>Status</td><td>S1</td><td>WH1</td><td>Available</td><td></td><td></td><td>10</td><td>10</td><td>2</td><td>0</td></tr><tr><td>Location</td><td>S1</td><td>WH1</td><td>Available</td><td>L001</td><td></td><td>12</td><td>12</td><td>0</td><td>0</td></tr><tr><td>License plate</td><td>S1</td><td>WH1</td><td>Available</td><td>L001</td><td>LP1</td><td>12</td><td>12</td><td>0</td><td>0</td></tr></tbody></table>
<p>The reservations are tracked only on the levels that are affected by the reservation. Because of the way that information about availability and reservations is stored, the corresponding values from the <strong>InventSum</strong> table cannot be used directly for items that are using warehouse management processes.</p>
<p>The following steps provide a high-level overview of the algorithm that determines the available on-hand quantity for
an item and a set of inventory dimensions:</p>
<ul>
<li>Determine the available on-hand quantity, based on the exact dimensions. This is the lowest level in the hierarchy.</li>
<li>Determine the smallest available quantity from all levels above the level found in step 1.</li>
<li>Return the smaller of the quantities found in step 1 and step 2. This is the available quantity.</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-a">Example A<a href="#example-a" class="hash-link" aria-label="Direct link to Example A" title="Direct link to Example A">​</a></h4>
<p>The following physical inventory exists for the item (some dimensions like site, inventory status, license plate are irrelevant and are omitted throughout the scenario):</p>
<ul>
<li><em>Warehouse: W1, Location: L1, Physical inventory: 6</em></li>
</ul>
<p>A sales order with one line is created and reserved:</p>
<ul>
<li><em>Warehouse: W1, Quantity: 5</em></li>
</ul>
<p>The sales order is released to warehouse. As a result warehouse work is created:</p>
<ul>
<li><em>Work type: Pick, Warehouse: W1, Location: L1, Quantity: 5</em></li>
<li><em>Work type: Put, Warehouse: W1, Location: Baydoor, Quantity: 5</em></li>
</ul>
<p>Now we have the following inventory transactions:</p>
<table><thead><tr><th>Reference</th><th>Warehouse</th><th>Location</th><th>Status issue</th><th>Quantity</th></tr></thead><tbody><tr><td>Sales line</td><td>W1</td><td></td><td>Reserved physical</td><td>-5</td></tr><tr><td>Pick work</td><td>W1</td><td>L1</td><td>Reserved physical</td><td>-5</td></tr><tr><td>Put work</td><td>W1</td><td>Baydoor</td><td>Ordered</td><td>5</td></tr></tbody></table>
<p>So once we roll up the transactions into the <strong>InventSum</strong> table the contents of the table will look like this</p>
<table><thead><tr><th>Warehouse</th><th>Location</th><th>Physical inventory</th><th>Reserved physical</th><th>Available physical</th><th>Ordered</th></tr></thead><tbody><tr><td>W1</td><td></td><td>0</td><td>5</td><td>-5</td><td>0</td></tr><tr><td>W1</td><td>L1</td><td>6</td><td>5</td><td>1</td><td>0</td></tr><tr><td>W1</td><td>Baydoor</td><td>0</td><td>0</td><td>0</td><td>5</td></tr></tbody></table>
<p>On hand quantities for warehouse W1 like we used to do it in versions prior to AX 2012 R3 (sum up InventSum quantities for warehouse W1)</p>
<table><thead><tr><th>Warehouse</th><th>Physical inventory</th><th>Reserved physical</th><th>Available physical</th><th>Ordered</th></tr></thead><tbody><tr><td>W1</td><td>6</td><td>10</td><td>-4</td><td>5</td></tr></tbody></table>
<p>We should have shipped 5 items and we have 6 items on stock, 1 item is available. This is exactly the reason why summing up available and reserved quantities from the <strong>InventSum</strong> table may produce incorrect results for items that use warehouse management processes.</p>
<p>The sales reservation was taken on the warehouse level of the reservation hierarchy to ensure that we keep enough on hand in the warehouse to ship the reserved quantity. The pick work reservation was taken on the location level and it ensures that the reserved quantity will still be physically available when the warehouse worker comes to the warehouse location to pick it. Work reservation does not affect physical availability on the warehouse level. This means that the new reservation engine will be able to figure out that we still have one item available on the warehouse level.</p>
<table><thead><tr><th>Warehouse</th><th>Physical inventory</th><th>Reserved physical</th><th>Available physical</th><th>Ordered</th></tr></thead><tbody><tr><td>W1</td><td>6</td><td>5</td><td>1</td><td>5</td></tr></tbody></table>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-b">Example B<a href="#example-b" class="hash-link" aria-label="Direct link to Example B" title="Direct link to Example B">​</a></h4>
<table><thead><tr><th>Reference</th><th>Warehouse</th><th>Location</th><th>Status issue</th><th>Status receipt</th><th>Quantity</th></tr></thead><tbody><tr><td>Purchase line</td><td>W1</td><td>L1</td><td></td><td>Purchased</td><td>10</td></tr><tr><td>Purchase line</td><td>W1</td><td>L2</td><td></td><td>Purchased</td><td>20</td></tr><tr><td>Sales line</td><td>W1</td><td></td><td>Reserved physical</td><td></td><td>-25</td></tr><tr><td>Pick work</td><td>W1</td><td>L1</td><td>Reserved physical</td><td></td><td>-10</td></tr><tr><td>Put work</td><td>W1</td><td>Baydoor</td><td>Ordered</td><td></td><td>10</td></tr></tbody></table>
<p>After the transactions are aggregated the <strong>InventSum</strong> table contains the following information</p>
<table><thead><tr><th>Warehouse</th><th>Location</th><th>Physical inventory</th><th>Reserved physical</th><th>Available physical</th><th>Ordered</th></tr></thead><tbody><tr><td>W1</td><td></td><td>0</td><td>25</td><td>-25</td><td>0</td></tr><tr><td>W1</td><td>L1</td><td>10</td><td>10</td><td>0</td><td>0</td></tr><tr><td>W1</td><td>L2</td><td>20</td><td>0</td><td>20</td><td>0</td></tr><tr><td>W1</td><td>Baydoor</td><td>0</td><td>0</td><td>0</td><td>10</td></tr></tbody></table>
<p>For each of the levels of the reservation hierarchy it stores available and reserved quantities in the <code>WHSInventReserve</code> table which allows the engine to calculate availability correctly.</p>
<p>To work with available quantities regardless of whether the item is using warehouse management processes or not the <code>InventIAvailability</code> interface was introduced. The following list contains the InventSum fields and methods that should not be used directly and the corresponding InventIAvailability methods that should be used instead:</p>
<table><thead><tr><th>Obsolete field/method</th><th>Corresponding InventIAvailability method</th></tr></thead><tbody><tr><td>InventSum.AvailOrdered</td><td>InventIAvailability.availTotal()</td></tr><tr><td>InventSum.availOrderedCalculated()</td><td>InventIAvailability.availTotal()</td></tr><tr><td>InventSum.AvailPhysical</td><td>InventIAvailability.availPhysical()</td></tr><tr><td>InventSum.availPhysicalCalculated()</td><td>InventIAvailability.availPhysical()</td></tr><tr><td>InventSum.availReservation()</td><td>InventIAvailability.availReservation()</td></tr><tr><td>InventSum.Ordered</td><td>InventIAvailability.ordered()</td></tr><tr><td>InventSum.orderedSum()</td><td>InventIAvailability.orderedSum()</td></tr><tr><td>InventSum.ReservOrdered</td><td>InventIAvailability.reservOrdered()</td></tr><tr><td>InventSum.ReservPhysical</td><td>InventIAvailability.reservPhysical()</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32-implementation-of-on-hand-calculations">3.2 Implementation of on-hand calculations<a href="#32-implementation-of-on-hand-calculations" class="hash-link" aria-label="Direct link to 3.2 Implementation of on-hand calculations" title="Direct link to 3.2 Implementation of on-hand calculations">​</a></h3>
<p>Three major APIs were introduced for retrieving item availability:</p>
<p>– <code>InventAvailabilityProvider</code>
– <code>InventAvailabilityFormCache</code>
– <code>InventOnhand</code></p>
<ul>
<li><strong>InventAvailabilityProvider</strong></li>
</ul>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">InventIAvailability  inventIAvailability = InventAvailabilityProvider::findByItemDim(</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                                            InventTable::find(itemdId), dim).parmInventAvailability();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">Info(strFmt(&quot;inventIAvailability, availPhysical %1, ordered %2, reservPhysical %3, reservOrdered %4&quot;, </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventIAvailability.availPhysical(), </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventIAvailability.ordered(), </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventIAvailability.reservPhysical(), </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventIAvailability.reservOrdered()));</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">InventAvailabilityByUnit inventAvailabilityByUnitSum = InventAvailabilityProvider::findByItemSumDim(</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                                                        InventTable::find(itemdId), inventSum, dim);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">Info(strFmt(&quot;inventAvailabilityByUnitSum, availPhysical %1, ordered %2, reservPhysical %3, reservOrdered %4&quot;, </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventAvailabilityByUnitSum.availPhysical().qty(false), </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventAvailabilityByUnitSum.ordered().qty(false), </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventAvailabilityByUnitSum.reservPhysical().qty(false), </span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">                inventAvailabilityByUnitSum.reservOrdered().qty(false)));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>InventAvailabilityFormCache</strong></li>
</ul>
<p>In scenarios where you want to display available quantities on a form you can use the InventAvailabilityFormCache class.
It is responsible for retrieving and caching available on hand quantities per item per inventory dimension combination. To use it on a form you need to:</p>
<p>– Declare an <code>InventAvailabilityFormCache</code> field in <code>classDeclaration</code> of the form.
– Initialize the cache field in the <code>init</code> method of the form:</p>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">public void init()</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    super();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    inventAvailabilityFormCache = InventAvailabilityFormCache::construct();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>– Flush the cache in the <code>executeQuery</code> method of the primary data source that the <code>InventSum</code> data source is joined to:</p>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">public void executeQuery()</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    inventAvailabilityFormCache.refreshCache();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    super();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>– Create display methods for available on hand fields that need to be displayed on the form. If <code>InventDim</code> is joined to <code>InventSum</code> then the display methods should be declared on the <code>InventSum</code> data source:</p>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">public display InventQtyReservPhysical reservPhysical(InventSum _inventSum)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    return inventAvailabilityFormCache.availabilityFromSumJoinedWithDim(_inventSum, inventDim_ds).reservPhysical();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that the <code>availabilityFromSumJoinedWithDim</code> method should be used. Otherwise, if <code>InventSum</code> is joined to InventDim then the display method should be declared on the <code>InventDim</code> data source:</p>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">public display InventQtyReservPhysical reservPhysical(InventDim _inventDim)</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">{</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">    return inventAvailabilityFormCache.availabilityFromDimJoinedWithSum(_inventDim, inventSum_ds).reservPhysical();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that the <code>availabilityFromDimJoinedWithSum</code> method should be used.</p>
<ul>
<li><strong>InventOnhand</strong></li>
</ul>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">InventOnhand inventOnHand = InventOnhand::newParameters(itemdId, dim , dimParm);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">Info(strFmt(&quot;inventOnHand, availPhysical %1, ordered %2, reservPhysical %3, reservOrdered %4&quot;, inventOnHand.availPhysical(), inventOnHand.ordered(), inventOnHand.reservPhysical(), inventOnHand.reservOrdered()));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The on-hand information is stored in a table called <code>WHSInventReserve</code>. The <code>WHSInventReserveDelta</code> table is used to track changes that the current transaction causes in the on-hand quantity. On the final commit, the <code>WHSInventReserve</code> table is updated based on the changes in the <code>WHSInventReserveDelta</code> table.</p>
<p>Because many scenarios involve calculating on-hand quantities based on <code>itemId</code>, <code>InventDim</code>, or <code>InventSum</code> records for
both WHS-enabled and non-WHS-enabled items, APIs are provided to support the calculations in a seamless way.</p>
<p>The following example shows how to instantiate the class that can be used to calculate availability for both WHSenabled and non-WHS-enabled items.</p>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#faf8f5;--prism-color:#728fcb"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="background-color:#faf8f5;color:#728fcb"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#728fcb"><span class="token plain">InventAvailabilitySearch availabilitySearch;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">InventIAvailability availability;</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">availabilitySearch = InventAvailabilitySearch::construct();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">availabilitySearch.setItemId(_itemId);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">availabilitySearch.setInventDimCriteria(_inventDimCriteria, _inventDimCriteriaParm);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">availabilitySearch.setInventSum(_inventSum);</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">availability = InventAvailabilityProvider::construct().find(availabilitySearch).parmInventAvailability();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">this.AvailOrderedCalculated         = availability.availTotal();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">this.AvailPhysicalCalculated        = availability.availPhysical();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">this.ReservPhysical                 = availability.reservPhysical();</span><br></span><span class="token-line" style="color:#728fcb"><span class="token plain">this.OrderedSum                     = availability.orderedSum();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>InventAvailabilityProvider</code> class provides numerous other APIs that are used to determine the availability based on various types of input. The existing <code>InventOnHandQty</code> class has been updated so that it also provides correct results for items that are enabled for warehouse management processes.</p>
<p>The following illustration shows the various classes and interfaces that are used to provide and encapsulate the calculations. Note that, for the sake of simplicity, some details have been omitted.</p>
<p><img decoding="async" loading="lazy" alt="Image" src="/assets/images/InventAvailabilityProvider-011f47291031b7f827a299d867868173.png" title="InventAvailabilityProvider" width="1023" height="640" class="img_ev3q"></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-reservation-strategies">4. Reservation strategies<a href="#4-reservation-strategies" class="hash-link" aria-label="Direct link to 4. Reservation strategies" title="Direct link to 4. Reservation strategies">​</a></h2>
<p>To control the levels of the reservation hierarchy at which reservations are made, the system uses the concept of a reservation strategy. A reservation strategy determines the outcome of a reservation, and the dimensions that are used to make the reservation. Reservation strategies are implemented in the code and are not currently user-configurable.</p>
<p>Each reservation strategy determines the level that the reservation should be made on. If the dimensions that are passed to the reservation system do not cover all the dimensions to the level defined by the strategy, the reservation system queries the on-hand availability until the required level; then, based on the results of this query, it does the reservation so that it covers all the required dimensions.</p>
<p>The reservation strategies that are chosen for a reservation depend on multiple factors, such as the following:
• Warehouse setup
• Order type</p>
<p>The following table describes the reservation strategies that the reservation system uses.</p>
<table><thead><tr><th>Reservation strategy</th><th>Description</th></tr></thead><tbody><tr><td>None</td><td>The reservation is made on the dimensions that are passed, if possible. This strategy is</td></tr><tr><td></td><td>used by inventory blocking, and lets you make reservations on, for example, the site</td></tr><tr><td></td><td>level or the warehouse level.</td></tr><tr><td>All</td><td>The reservation is made on all of the dimensions in the reservation hierarchy. This</td></tr><tr><td></td><td>strategy is used, for example, for transfer journals, or for warehouses that have not</td></tr><tr><td></td><td>been enabled for warehouse management processes.</td></tr><tr><td>Above location</td><td>The reservation is made only on the locations above the location level. This strategy is</td></tr><tr><td></td><td>used, for example, for sales and transfer orders when reservations are made in a</td></tr><tr><td></td><td>warehouse that is enabled for warehouse management processes.</td></tr><tr><td>All not allowed blank</td><td>The reservation is made on the first lowest level that does not allow for blank issue for</td></tr><tr><td></td><td>the inventory dimensions. This strategy enables automatic reservations on non-licenseplate-controlled locations.</td></tr><tr><td>Batch level</td><td>This strategy is applied for items for which the Batch number dimension is selected and</td></tr><tr><td></td><td>positioned above the Location dimension in the reservation hierarchy. This strategy is</td></tr><tr><td></td><td>used when only reservations that are reserved ordered can be made. In that case, a</td></tr><tr><td></td><td>reservation until the batch level is attempted.</td></tr></tbody></table>
<p>The reservation system supports multiple reservation strategies in sequential order when reservations are made. For example, the system uses the All and All not allowed blank strategies to make reservations for transfer journals.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-details-about-the-implementation-of-reservation-strategies">5. Details about the implementation of reservation strategies<a href="#5-details-about-the-implementation-of-reservation-strategies" class="hash-link" aria-label="Direct link to 5. Details about the implementation of reservation strategies" title="Direct link to 5. Details about the implementation of reservation strategies">​</a></h2>
<p>The following illustration shows the classes that are used to implement the reservation strategies, and the main consumers of the classes. Note that, for the sake of simplicity, some details have been omitted.</p>
<p><img decoding="async" loading="lazy" alt="Image" src="/assets/images/reservation-strategies-76bebbc22abcb93ed9503d974660354d.png" title="reservation-strategies" width="1475" height="701" class="img_ev3q"></p>
<p>The implementation is easy to extend, because the instantiation uses the <code>SysExtension</code> framework.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6-synchronization-of-dimensions-between-receipts-and-issues">6. Synchronization of dimensions between receipts and issues<a href="#6-synchronization-of-dimensions-between-receipts-and-issues" class="hash-link" aria-label="Direct link to 6. Synchronization of dimensions between receipts and issues" title="Direct link to 6. Synchronization of dimensions between receipts and issues">​</a></h2>
<p>When an inventory transaction is marked or reserved ordered, the inventory dimensions are typically synchronized between <em>receipts</em> and <em>issues</em>. For example, when a purchase order that was created based on a sales order is modified or received, the dimensions are transferred to the inventory transactions for the sales line.</p>
<p>For items that are enabled for warehouse management processes, the synchronization differs from the standard behavior. When work must be created, the source line transactions can be reserved only until the level above the location level. If all dimensions are synchronized, work cannot be created. Therefore, dimensions above the location level are not synchronized for all scenarios.</p>
<p>If the item and warehouse are enabled for warehouse management processes, and if the issue type is a type that can generate work, such as a sales line, only dimensions above the location level are synchronized. This means that if an item uses batch numbers, and the batch number is placed below the location in the reservation hierarchy, the batch number is not synchronized from receipt to issue transactions.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="7-details-about-the-implementation-of-synchronization-between-receipts-and-issues">7. Details about the implementation of synchronization between receipts and issues<a href="#7-details-about-the-implementation-of-synchronization-between-receipts-and-issues" class="hash-link" aria-label="Direct link to 7. Details about the implementation of synchronization between receipts and issues" title="Direct link to 7. Details about the implementation of synchronization between receipts and issues">​</a></h2>
<p>The logic that determines how the dimensions are synchronized is implemented in the following methods on the <strong>inventMovement</strong> class:</p>
<ul>
<li><code>getInventDimForReservedTransPhysChange</code></li>
<li><code>getInventDimForIssueTransFromReceipt</code></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/on-hand">on-hand</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/inventory">inventory</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/warehouse-management">warehouse management</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-12-03T20:50:14.000Z" itemprop="dateModified">Dec 3, 2023</time></b> by <b>Luan Nguyen</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/framework"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Framework</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/development/framework/2022-11-13-extend-on-hand-entities-fin-ops"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Extend on-hand inventory entities FinOps </div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-inventory-reservation-hierarchy-in-warehouse-management" class="table-of-contents__link toc-highlight">1. <strong>Inventory reservation hierarchy in Warehouse management</strong></a><ul><li><a href="#11-reservation-hierarchies" class="table-of-contents__link toc-highlight">1.1 <strong>Reservation hierarchies</strong></a></li><li><a href="#12-reservation-hierarchies-implementation" class="table-of-contents__link toc-highlight">1.2 <strong>Reservation hierarchies implementation</strong></a></li><li><a href="#13-making-reservations-on-different-levels" class="table-of-contents__link toc-highlight">1.3 Making reservations on different levels</a></li></ul></li><li><a href="#2-impact-of-the-reservation-hierarchy-setup" class="table-of-contents__link toc-highlight">2. Impact of the reservation hierarchy setup</a></li><li><a href="#3-on-hand-representation-and-calculations" class="table-of-contents__link toc-highlight">3. On-hand representation and calculations</a><ul><li><a href="#31-on-hand-for-items-that-are-using-warehouse-management-processes" class="table-of-contents__link toc-highlight">3.1 On-hand for items that are using warehouse management processes</a></li><li><a href="#32-implementation-of-on-hand-calculations" class="table-of-contents__link toc-highlight">3.2 Implementation of on-hand calculations</a></li></ul></li><li><a href="#4-reservation-strategies" class="table-of-contents__link toc-highlight">4. Reservation strategies</a></li><li><a href="#5-details-about-the-implementation-of-reservation-strategies" class="table-of-contents__link toc-highlight">5. Details about the implementation of reservation strategies</a></li><li><a href="#6-synchronization-of-dimensions-between-receipts-and-issues" class="table-of-contents__link toc-highlight">6. Synchronization of dimensions between receipts and issues</a></li><li><a href="#7-details-about-the-implementation-of-synchronization-between-receipts-and-issues" class="table-of-contents__link toc-highlight">7. Details about the implementation of synchronization between receipts and issues</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">One stop FO</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/X++" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://community.dynamics.com/forums/thread/?groupid=5b012a23-c24f-46fc-bfb6-45a1c401d526" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dynamics 365 Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.yammer.com/dynamicsaxfeedbackprograms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dynamics 365 &amp; Power Platform Preview Program<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Dynamics365/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/about">Maintainer of Automaly</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Automaly.com.</div></div></div></footer></div>
</body>
</html>